local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local camera = workspace.CurrentCamera

-- GUIs
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "MenuBallGui"
screenGui.ResetOnSpawn = false

-- Bola (bot√£o redondo)
local ball = Instance.new("ImageButton")
ball.Name = "MagicBall"
ball.Size = UDim2.new(0, 70, 0, 70)
ball.Position = UDim2.new(0.1, 0, 0.1, 0)
ball.BackgroundTransparency = 1
ball.Image = "rbxassetid://3570695787"
ball.Text = "üëª"
ball.ImageColor3 = Color3.fromRGB(170, 0, 255)
ball.ScaleType = Enum.ScaleType.Stretch
ball.Parent = screenGui
ball.Active = true
ball.Draggable = true

-- Menu
local menu = Instance.new("Frame")
menu.Size = UDim2.new(0, 300, 0, 320)
menu.Position = UDim2.new(0, 100, 0, 100)
menu.BackgroundColor3 = Color3.fromRGB(40, 0, 60)
menu.Visible = false
menu.Active = true
menu.Draggable = true
menu.Parent = screenGui

-- Fun√ß√£o para criar bot√µes
local function createButton(text)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 35)
	btn.Position = UDim2.new(0, 5, 0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(100, 0, 180)
	btn.Text = text
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.FredokaOne
	btn.TextScaled = true
	btn.AutoButtonColor = true
	btn.Parent = menu
	return btn
end

-- Estados
local isUp = false
local teleportPos = nil
local espOn = false
local godMode = false
local infiniteJump = false

-- Bot√µes
local upButton = createButton("Subir no c√©u (15s)")
local speedButton = createButton("Velocidade")
local jumpButton = createButton("Pulo Alto")
local espButton = createButton("ESP")
local teleportButton = createButton("Teleportar")
local godButton = createButton("Modo Invenc√≠vel")
local infiniteJumpButton = createButton("Pulos Ilimitados")

-- Posiciona os bot√µes
local function updateButtonPositions()
	local y = 0
	for _, btn in ipairs(menu:GetChildren()) do
		if btn:IsA("TextButton") then
			btn.Position = UDim2.new(0, 5, 0, y)
			y += 40
		end
	end
end
updateButtonPositions()

-- Subida
upButton.MouseButton1Click:Connect(function()
	if isUp then return end
	isUp = true
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		root.Anchored = true
		root.CFrame = CFrame.new(root.Position.X, 196.2, root.Position.Z)
		task.wait(15)
		root.Anchored = false
	end
	isUp = false
end)

-- Velocidade
speedButton.MouseButton1Click:Connect(function()
	humanoid.WalkSpeed = 60
end)

-- Pulo alto
jumpButton.MouseButton1Click:Connect(function()
	humanoid.UseJumpPower = true
	humanoid.JumpPower = 120
	humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
end)

-- ESP
espButton.MouseButton1Click:Connect(function()
	espOn = not espOn
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local hrp = plr.Character.HumanoidRootPart
			if espOn then
				local box = Instance.new("BoxHandleAdornment")
				box.Name = "ESPBox"
				box.Adornee = hrp
				box.Size = Vector3.new(3, 6, 3)
				box.AlwaysOnTop = true
				box.ZIndex = 10
				box.Color3 = Color3.fromRGB(255, 0, 255)
				box.Transparency = 0.5
				box.Parent = hrp
			else
				if hrp:FindFirstChild("ESPBox") then
					hrp.ESPBox:Destroy()
				end
			end
		end
	end
end)

-- Teleporte
teleportButton.MouseButton1Click:Connect(function()
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		if teleportPos == nil then
			teleportPos = root.Position
			teleportButton.Text = "Clique novamente para teleportar"
		else
			root.CFrame = CFrame.new(teleportPos)
			teleportButton.Text = "Teleportar"
			teleportPos = nil
		end
	end
end)

-- Modo Invenc√≠vel
godButton.MouseButton1Click:Connect(function()
	godMode = not godMode
	godButton.Text = godMode and "Invenc√≠vel: ON" or "Modo Invenc√≠vel"

	local humanoid = character:FindFirstChild("Humanoid")
	if humanoid then
		if godMode then
			humanoid.Health = humanoid.MaxHealth
			humanoid:GetPropertyChangedSignal("Health"):Connect(function()
				if godMode and humanoid.Health < humanoid.MaxHealth then
					humanoid.Health = humanoid.MaxHealth
				end
			end)
		end
	end
end)

-- Bloquear ragdoll
character.DescendantAdded:Connect(function(obj)
	if godMode and (obj:IsA("BallSocketConstraint") or obj.Name:lower():find("ragdoll")) then
		obj:Destroy()
	end
end)

-- Pulo infinito
infiniteJumpButton.MouseButton1Click:Connect(function()
	infiniteJump = not infiniteJump
	infiniteJumpButton.Text = infiniteJump and "Pulo Infinito: ON" or "Pulos Ilimitados"
end)

UserInputService.JumpRequest:Connect(function()
	if infiniteJump then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- Mostrar/ocultar menu
local menuVisible = false
ball.MouseButton1Click:Connect(function()
	menuVisible = not menuVisible
	menu.Visible = menuVisible
end)

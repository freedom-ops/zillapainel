local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local camera = workspace.CurrentCamera

-- GUIs
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "MenuBallGui"
screenGui.ResetOnSpawn = false

-- Bola (botão redondo)
local ball = Instance.new("ImageButton")
ball.Name = "MagicBall"
ball.Size = UDim2.new(0, 80, 0, 80)
ball.Position = UDim2.new(0.1, 0, 0.1, 0)
ball.BackgroundTransparency = 1
ball.Image = "rbxassetid://3570695787"
ball.ImageColor3 = Color3.fromRGB(170, 0, 255)
ball.ScaleType = Enum.ScaleType.Stretch
ball.Parent = screenGui
ball.Active = true
ball.Draggable = true

-- Menu
local menu = Instance.new("Frame")
menu.Size = UDim2.new(0, 200, 0, 250)
menu.Position = UDim2.new(0, 100, 0, 100)
menu.BackgroundColor3 = Color3.fromRGB(40, 0, 60)
menu.Visible = false
menu.Active = true
menu.Draggable = true
menu.Parent = screenGui

-- Fonte
local function createButton(text)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 35)
	btn.Position = UDim2.new(0, 5, 0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(100, 0, 180)
	btn.Text = text
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.FredokaOne
	btn.TextScaled = true
	btn.AutoButtonColor = true
	btn.Parent = menu
	return btn
end

-- Funções
local isUp = false
local teleportPos = nil
local espOn = false

-- Botões
local upButton = createButton("Subir 196.2 (15s)")
local speedButton = createButton("Velocidade 60")
local jumpButton = createButton("Pulo Alto")
local espButton = createButton("ESP")
local teleportButton = createButton("Teleportar")

-- Reposicionar botões
local function updateButtonPositions()
	for i, btn in ipairs(menu:GetChildren()) do
		if btn:IsA("TextButton") then
			btn.Position = UDim2.new(0, 5, 0, (i - 1) * 40)
		end
	end
end
updateButtonPositions()

-- Subida
upButton.MouseButton1Click:Connect(function()
	if isUp then return end
	isUp = true
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		local originalPos = root.Position
		root.Anchored = true
		root.CFrame = CFrame.new(root.Position.X, 196.2, root.Position.Z)
		task.wait(15)
		root.Anchored = false
	end
	isUp = false
end)

-- Velocidade
speedButton.MouseButton1Click:Connect(function()
	humanoid.WalkSpeed = 60
end)

-- Pulo alto
jumpButton.MouseButton1Click:Connect(function()
	humanoid.UseJumpPower = true
	humanoid.JumpPower = 120
	humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
end)

-- ESP
espButton.MouseButton1Click:Connect(function()
	espOn = not espOn
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local hrp = plr.Character.HumanoidRootPart
			if espOn then
				local box = Instance.new("BoxHandleAdornment")
				box.Name = "ESPBox"
				box.Adornee = hrp
				box.Size = Vector3.new(3,6,3)
				box.AlwaysOnTop = true
				box.ZIndex = 10
				box.Color3 = Color3.fromRGB(255, 0, 255)
				box.Transparency = 0.5
				box.Parent = hrp
			else
				if hrp:FindFirstChild("ESPBox") then
					hrp.ESPBox:Destroy()
				end
			end
		end
	end
end)

-- Teleporte
teleportButton.MouseButton1Click:Connect(function()
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then
		if teleportPos == nil then
			teleportPos = root.Position
			teleportButton.Text = "Teleportar (clique novamente)"
		else
			root.CFrame = CFrame.new(teleportPos)
			teleportButton.Text = "Teleportar"
			teleportPos = nil
		end
	end
end)

-- Mostrar/ocultar menu
local menuVisible = false
ball.MouseButton1Click:Connect(function()
	menuVisible = not menuVisible
	menu.Visible = menuVisible
end)
